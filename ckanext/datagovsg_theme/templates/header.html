{% ckan_extends %}

{% block header_account %}
{% endblock %}

{% block header_site_navigation %}
<header class="modern-header">
  <div class="header-container">
    <div class="header-inner">

      {# Logo Section #}
      <div class="logo-section">
        <a href="{{ h.url_for('home.index') }}" class="brand-logo">
          <svg class="logo-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
            <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
            <path d="M16 8L24 12V20L16 24L8 20V12L16 8Z" fill="white" opacity="0.9"/>
            <defs>
              <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                <stop offset="0%" stop-color="#6253e8"/>
                <stop offset="100%" stop-color="#8b5cf6"/>
              </linearGradient>
            </defs>
          </svg>
          <span class="brand-name">data.gov.sg</span>
        </a>
      </div>

      {# Main Navigation #}
      <nav class="main-navigation">
        <a href="{{ h.url_for('dataset.search') }}" class="nav-link {{ 'is-active' if request.path.startswith('/dataset') else '' }}">
          <span class="nav-text">Datasets</span>
        </a>
        <a href="{{ h.url_for('organization.index') }}" class="nav-link {{ 'is-active' if request.path.startswith('/organization') else '' }}">
          <span class="nav-text">Agencies</span>
        </a>
        <a href="{{ h.url_for('home.about') }}" class="nav-link">
          <span class="nav-text">Help</span>
        </a>
      </nav>

      {# User Actions #}
      <div class="user-actions">
        {% if c.userobj %}
          <div class="user-info">
            <a href="{{ h.url_for('user.read', id=c.userobj.name) }}" class="user-profile">
              <div class="avatar">{{ c.userobj.display_name[0]|upper }}</div>
              <span class="user-name">{{ c.userobj.display_name }}</span>
            </a>
          </div>
          <a href="{{ h.url_for('user.logout') }}" class="btn btn-secondary">Logout</a>
        {% else %}
          <a href="{{ h.url_for('user.login') }}" class="btn btn-primary">Login</a>
        {% endif %}
      </div>

      {# Mobile Toggle #}
      <button class="mobile-toggle" type="button" data-toggle="collapse" data-target="#mobileNav">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
      </button>

    </div>

    {# Mobile Navigation #}
    <div id="mobileNav" class="mobile-nav collapse">
      <div class="mobile-nav-inner">
        <a href="{{ h.url_for('dataset.search') }}" class="mobile-link">
          <span>Datasets</span>
        </a>
        <a href="{{ h.url_for('organization.index') }}" class="mobile-link">
          <span>Agencies</span>
        </a>
        <a href="{{ h.url_for('home.about') }}" class="mobile-link">
          <span>Help</span>
        </a>
        <div class="mobile-divider"></div>
        {% if c.userobj %}
          <a href="{{ h.url_for('user.read', id=c.userobj.name) }}" class="mobile-link">
            <span>{{ c.userobj.display_name }}</span>
          </a>
          <a href="{{ h.url_for('user.logout') }}" class="mobile-link">
            <span>Logout</span>
          </a>
        {% else %}
          <a href="{{ h.url_for('user.login') }}" class="mobile-link mobile-link-primary">
            <span>Login</span>
          </a>
        {% endif %}
      </div>
    </div>

  </div>
</header>
{% endblock %}

